{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst refs = {\n    formEl: document.querySelector('.js-search-form'),\n    imgEl: document.querySelector('.js-image-container'),\n    loaderEl: document.querySelector('.loader'),\n};\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n\n    const query = e.target.elements.text.value.trim();\n\n    if (!query) {\n        iziToast.error({\n            position: \"topRight\",\n            message: 'Please enter a search query!',\n        });\n        return;\n    }\n\n    // toggleLoader(true);\n\n    getImg(query)\n        .then(data => {\n            renderImg(data);\n            // toggleLoader(false);\n\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    position: \"topRight\",\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n            }\n            e.target.elements.text.value = '';\n        })\n        .catch(error => {\n            console.error('Error fetching images:', error);\n            // toggleLoader(false);\n            iziToast.error({\n                position: \"topRight\",\n                message: 'Failed to fetch images. Please try again later.',\n            });\n        });\n        \n}\n\nfunction getImg(query) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '42295751-6e09ed05d50a99192d667c3e9';\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const url = `${BASE_URL}?${params.toString()}`;\n\n    return fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return response.json();\n        });\n}\n\nfunction imgTemplate(photo) {\n    \n    return `\n        <a href=\"${photo.largeImageURL}\" class=\"photo-container\" data-lightbox=\"photos\">\n            <img\n                src=\"${photo.webformatURL}\"\n                alt=\"${photo.tags}\"\n                class=\"photo\"\n            />\n            <div class=\"photo-body\">\n                <p class=\"photo-name\">Likes ${photo.likes}</p>\n                <p class=\"photo-name\">Views ${photo.views}</p>\n                <p class=\"photo-name\">Comments ${photo.comments}</p>\n                <p class=\"photo-name\">Downloads ${photo.downloads}</p>\n            </div>\n        </a>\n    `;\n}\n\nfunction renderImg(data) {\n    refs.imgEl.innerHTML = data.hits.map(img => imgTemplate(img)).join('');\n    const lightbox = new SimpleLightbox('[data-lightbox=\"photos\"]');\n    \n    lightbox.refresh();\n}\n\n// function toggleLoader(isVisible) {\n//     refs.loaderEl.style.display = isVisible ? 'inline-block' : 'none';\n// }\n"],"names":["refs","onFormSubmit","e","query","iziToast","getImg","data","renderImg","error","BASE_URL","API_KEY","params","url","response","imgTemplate","photo","img","SimpleLightbox"],"mappings":"6vBAQA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,iBAAiB,EAChD,MAAO,SAAS,cAAc,qBAAqB,EACnD,SAAU,SAAS,cAAc,SAAS,CAC9C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EAEnD,SAASA,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAEhB,MAAMC,EAAQD,EAAE,OAAO,SAAS,KAAK,MAAM,OAE3C,GAAI,CAACC,EAAO,CACRC,EAAS,MAAM,CACX,SAAU,WACV,QAAS,8BACrB,CAAS,EACD,MACH,CAIDC,EAAOF,CAAK,EACP,KAAKG,GAAQ,CACVC,EAAUD,CAAI,EAGVA,EAAK,KAAK,SAAW,GACrBF,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EAC7B,CAAiB,EAELF,EAAE,OAAO,SAAS,KAAK,MAAQ,EAC3C,CAAS,EACA,MAAMM,GAAS,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAE7CJ,EAAS,MAAM,CACX,SAAU,WACV,QAAS,iDACzB,CAAa,CACb,CAAS,CAET,CAEA,SAASC,EAAOF,EAAO,CACnB,MAAMM,EAAW,2BACXC,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGP,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAEKS,EAAM,GAAGH,CAAQ,IAAIE,EAAO,SAAU,CAAA,GAE5C,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,6BAA6B,EAEjD,OAAOA,EAAS,MAC5B,CAAS,CACT,CAEA,SAASC,EAAYC,EAAO,CAExB,MAAO;AAAA,mBACQA,EAAM,aAAa;AAAA;AAAA,uBAEfA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,8CAIaA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIjE,CAEA,SAASR,EAAUD,EAAM,CACrBN,EAAK,MAAM,UAAYM,EAAK,KAAK,IAAIU,GAAOF,EAAYE,CAAG,CAAC,EAAE,KAAK,EAAE,EACpD,IAAIC,EAAe,0BAA0B,EAErD,QAAO,CACpB"}